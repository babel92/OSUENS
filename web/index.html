<!DOCTYPE html>
<!-- saved from url=(0039)https://brand.osu.edu/digital-elements/ -->
<html class=" js csstransforms3d csstransitions" lang="en" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!--<base href="https://brand.osu.edu/">--><base href=".">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=1">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>OSU Emergency Map</title>


	<!-- OSU webfonts -->
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="//www.osu.edu/assets/fonts/webfonts-ie.css">
	<![endif]-->
	<link rel="stylesheet" href="./index_files/webfonts.css">

    <!-- Foundation CSS framework -->
	<link rel="stylesheet" href="./index_files/normalize.css">
	<link rel="stylesheet" href="./index_files/foundation.css">
	<link rel="stylesheet" href="./index_files/foundation-icons.css">
	<link rel="stylesheet" type="text/css" href="./index_files/demo.css">

    <!--[if gte IE 9]><!-->
    <link rel="stylesheet" type="text/css" href="./index_files/component.css">
    <!--<![endif]-->

	<!-- UCOM styles-->
	<link rel="stylesheet" href="./index_files/brand_styles.css">

	<!-- OSU Navbar -->
	<link rel="shortcut icon" href="https://www.osu.edu/assets/web/navbar/osu_navbar/images/favicon.ico">
	<link rel="apple-touch-icon" href="https://www.osu.edu/assets/web/navbar/osu_navbar/images/apple-touch-icon.png">
	<link rel="stylesheet" href="./index_files/osu_navbar-resp-white.css">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
	   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
	   crossorigin=""/>
		 <!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
	integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
	crossorigin=""></script>

	<link rel="stylesheet" type="text/css" href="./index_files/Leaflet.Dialog.css">

	<script src="./index_files/Leaflet.Dialog.js" type="text/javascript" charset="utf-8"></script>

	<!-- csstransforms3d-shiv-cssclasses-prefixed-teststyles-testprop-testallprops-prefixes-domprefixes-load -->
	<script type="text/javascript" async="" src="./index_files/linkid.js.download"></script>
	<script async="" src="./index_files/analytics.js.download"></script><script src="./index_files/modernizr.custom.25376.js.download"></script>

	<script src="./index_files/jquery-1.11.0.min.js.download" type="text/javascript" charset="utf-8"></script>
	<script src="./index_files/jquery.magnific-popup.min.js.download" type="text/javascript" charset="utf-8"></script>

	<!--[if lte IE 8]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
      <script src="//s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js"></script>
      <script src="//html5base.googlecode.com/svn-history/r38/trunk/js/selectivizr-1.0.3b.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script>
    <![endif]-->



<!--
    0.0059 s - Query Time
    6 - Query Count
    0.4330 s - Parse Time
    0.4389 s - Total Time
    cache - Source
-->
</head>

<body class="guideline">

<div id="perspective" class="perspective effect-airbnb">

<nav class="outer-nav left vertical" role="navigation">
    <a href="https://brand.osu.edu/">Home</a>
    <a href="https://brand.osu.edu/our-brand/">Our Brand</a>
    <a href="https://brand.osu.edu/filter.html?tag=Applications&amp;key=section_category">Applications <small>(10)</small></a>
<a href="https://brand.osu.edu/filter.html?tag=Elements&amp;key=section_category">Elements <small>(9)</small></a>
<a href="https://brand.osu.edu/filter.html?tag=Resources&amp;key=section_category">Resources <small>(6)</small></a>
</nav>

<div class="container">
<div class="wrapper">

<div id="osu_navbar" role="navigation">
    <div class="row">
    	<h2 class="osu-semantic">Ohio State nav bar</h2>
		<a href="https://brand.osu.edu/#page-content" id="skip" class="osu-semantic">Skip to main content</a>
    	<div class="univ_info">
    		<p class="univ_name"><a href="http://osu.edu/" title="The Ohio State University">The Ohio State University</a></p>
    	</div><!-- /univ_info -->
    	<div class="univ_links">
    		<div class="links">
    			<ul>
    				<li><a href="http://www.osu.edu/help.php" class="help">Help</a></li>
    				<li><a href="http://buckeyelink.osu.edu/" class="buckeyelink">BuckeyeLink</a></li>
    				<li><a href="http://www.osu.edu/map/" class="map">Map</a></li>
    				<li><a href="http://www.osu.edu/findpeople.php" class="findpeople">Find People</a></li>
    				<li><a href="https://email.osu.edu/" class="webmail">Webmail</a></li>
    				<li><a href="http://osu.edu/search" class="search">Search Ohio State</a></li>
    			</ul>
    		</div><!-- /links -->
    	</div><!-- /univ_links -->
    </div><!-- /row -->
</div><!-- /osu_navbar -->

<header id="page-masthead">
	<div class="row">

		<div class="small-12 medium-9 columns">
			<h1><a href="https://brand.osu.edu/"><span class="hide-for-small">Ohio State </span><strong>Emergency Map</strong></a></h1>
		</div><!-- /9 -->

	</div><!-- /row -->
</header><!-- end #masthead -->

<section id="content">

		<div id="map" style="height: 700px;"></div>
    <div class="row">
			<script>

			var mymap = L.map('map').setView([40.008346, -83.023137], 13);

	    var dialog = L.control.dialog({initOpen:false,size:[700,500]})
	              .setContent("")
	              .addTo(mymap);
			L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
					'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
					'Imagery © <a href="http://mapbox.com">Mapbox</a>',
				id: 'mapbox.streets'
			}).addTo(mymap);
			mails=[];
			String.prototype.replaceAll = function(search, replacement) {
    		var target = this;
    		return target.split(search).join(replacement);
			};
			function showMsg(num){
				contents = [
		                    "<p><b>Message Content</b></p><p>",
												mails[num],
		                    "</p><button class='btn btn-primary' style=\"position:absolute;bottom:0px;right:0px;\" onclick='dialog.close()'>Close</button><br/><br/>"
		                    ].join('');
				dialog.setContent(contents).open();
			}

			function makePopup(entry){
				popup="";
				typ=entry["emergency_type"];
				susp_name=entry["suspect_name"];
				time=entry["time"];
				susp_traits=entry["suspect_traits"];
				img=entry["image_url"];
				addr=entry["address"];
				msg=entry["original_email"];

				popup+="<b>Type:</b>"+typ+"</br>";

				if(time.length>0){
					popup+="<b>Time:</b>";
					popup+=time;
					popup+="</br>";
				}
				popup+="<b>Name:</b>";
				if(susp_name.length>0){
					popup+=susp_name;
					popup+="</br>";
				}
				else{
					popup+="Unknown</br>";
				}
				if(addr.length>0){
					popup+="<b>Address of Occurence:</b>";
					popup+=addr;
					popup+="</br>";
				}
				if(susp_traits.length>0){
					popup+="<b>Suspect Description:</b>";
					popup+=susp_traits;
					popup+="</br>";
				}
				if(img.length>0){
					popup+="<b>Image:</b></br><img src=\"";
					popup+=img;
					popup+="\"></br>"
				}
				mails.push(msg.replaceAll("\n","</br>"));
				popup+="<a href=\"javascript:showMsg("+ (mails.length-1).toString() +")\">Show Original Message</a>";
				return popup;
			}

			function doMarkerScript(script,info){
				var popup_add=false;
				stmts=script.split("\n");
				stmts.forEach(function(stmt){
					stmt=stmt.split(",");
					if(stmt[0]=="circle"){
						var circ=L.circle([ parseFloat(stmt[1]),parseFloat(stmt[2])], {
						    color: 'red',
						    fillColor: '#f03',
						    fillOpacity: 0.5,
						    radius: parseFloat(stmt[3])
						}).addTo(mymap);
						if(!popup_add){
							circ.bindPopup(makePopup(info));
							popup_add=true;
						}
					}
					else if (stmt=="arrow") {

					}
					else{

					}
				});
			}

			$.getJSON('/api/get',function(data){
				emgcy_info=data;
				emgcy_info.forEach(function(e){
					doMarkerScript(e["marker_script"],e);
				});
			});
			navigator.geolocation.getCurrentPosition(function(pos){
				var circle = L.circle([ pos.coords.latitude, pos.coords.longitude], {
						color: 'green',
						fillOpacity: 0.5,
						radius: 50
				}).addTo(mymap).bindPopup("Your position!").openPopup();
			});


		</script>

    </div><!-- /row -->


<footer id="page_footer">
  	<div class="row">

  		<section id="footer_info">

  			<div id="institutional_info" class="small-12 medium-9 columns">
  				<a href="http://www.osu.edu/"><img src="./index_files/osu-web-footer.png" alt="The Ohio State University" title="The Ohio State University home page"></a>
  				<p>© 2017 | Student Academic Services Building | 281 W. Lane Ave. | Columbus, Ohio 43210 | <a href="tel:614-292-OHIO">614-292-OHIO</a></p>
  				<p>Contact: <a href="mailto:askabuckeye@osu.edu">Admissions</a> | <a href="mailto:webmaster@osu.edu">Webmaster</a> | Page maintained by <a href="https://universitymarketing.osu.edu/">University Marketing</a></p>
  				<p><a href="http://www.osu.edu/webmaster.php">Request</a> an alternate format of this page | <a href="http://ocio.osu.edu/status/">Web Services Status</a> | <a href="http://hr.osu.edu/policy/resources/110nondiscrimnotice.pdf">Nondiscrimination notice</a></p>
  	    	</div><!-- /institutional_info -->

  			<div id="footer_social" class=" small-12 medium-3 columns">
  	    		<a href="http://www.facebook.com/osu" class="socialicon"><img src="./index_files/facebook-32.png" alt="Facebook"></a>
  	    		<a href="http://twitter.com/OhioState" class="socialicon"><img src="./index_files/twitter-32.png" alt="Twitter"></a>
  	    		<a href="http://www.youtube.com/user/OhioStateUniversity" class="socialicon"><img src="./index_files/youtube-32.png" alt="YouTube"></a>
  				<a href="http://osu.edu/rss-feeds.html" class="socialicon"><img src="./index_files/rss-32.png" alt="RSS"></a>
  	  		</div>


  	  	</section><!-- /footer_info -->

  	</div><!-- /row -->
</footer><!-- /page_footer -->

</div><!-- /wrapper -->
</div><!-- /container -->

</div><!-- /perspective -->

<!-- jQuery ============================ -->

<script src="./index_files/classie.js.download"></script>
<!--[if gte IE 9]><!-->
<script src="./index_files/menu.js.download"></script>
<!--<![endif]-->


<link rel="stylesheet" href="./index_files/magnific-popup.css" media="screen, projection">
<script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
        $('a[rel^="magnific"]').magnificPopup({
          type: 'image',
		  gallery: {enabled:true}
		});
		$('.youtube_link').magnificPopup({
        type:'iframe'
    });
	});
</script>



<script src="./index_files/masonry.min.js.download"></script>
<script src="./index_files/imagesloaded.pkgd.min.js.download"></script>
<script type="text/javascript">
// initialize
$(function() {
    var $container = $('.big_grid');
    $container.masonry({
      columnWidth: 1,
      itemSelector: 'div.columns'
    }).imagesLoaded(function() {
   $('.big_grid').masonry();
  });
});
</script>



<script type="text/javascript">
    var $environmentalColors = $('.js-slideDown');
    var $environmentalColorsToggle = $('.environmentalColors-toggle');

    $environmentalColorsToggle.on('click', function() {
       if($environmentalColors.is(':visible')) {
           $environmentalColorsToggle.attr('aria-expanded', 'false');
           $environmentalColors.slideUp().attr('aria-hidden', 'true');
       } else {
           $environmentalColorsToggle.attr('aria-expanded', 'true');
           $environmentalColors.slideDown().attr('aria-hidden', 'false');
       }
    });
</script>

<script type="text/javascript">
  $(document).ready(function($) {
    $('.accordion-wrap').find('.accordion-toggle').click(function(){
      if( $(this).find('.toggler').hasClass('open') ) {
          $(this).find('.toggler').text('+').addClass('closed').removeClass('open').attr('aria-hidden', 'true');
      } else {
         $(this).find('.toggler').text('-').addClass('open').removeClass('removed').attr('aria-hidden', 'false');
      }
      $(this).next().slideToggle('fast');
    });
  });
</script>

<script src="./index_files/clipboard.min.js.download"></script>
<script>
    new Clipboard('.primary-btn');
    new Clipboard('.academics-btn');
    new Clipboard('.db-btn');
    new Clipboard('.value-btn');
    new Clipboard('.out-btn');
    new Clipboard('.col-btn');
</script>


<script type="text/javascript">

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24610600-1', 'auto');
  ga('require', 'linkid');
  ga('send', 'pageview');

</script>

<script type="text/javascript" src="./index_files/minitabs.js.download"></script>
<script type="text/javascript">
 $('#tabs-nav-bar').minitabs(0);

</script>

</body></html>
